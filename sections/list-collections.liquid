<section>
  <div class="layout sm:px-2 md:px-4 lg:px-0">
    {%- for collection in collections -%}
      {%- unless collection.products == empty -%}
        <div class="py-4">
          <div class="flex p-2 flex-wrap md:flex-nowrap items-center gap-2 bg-backgroundColor {% if section.settings.isOverrideDefualt %}{{section.settings.theme_color}}{% else %}{{settings.default_color_scheme}}{% endif -%}">
            <div class="sm:w-full md:w-1/5 relative bg-disabled">
              {%- render 'collection-card', collection:collection, class: 'w-full' -%}
              {% comment %}
                <div class="absolute bottom-5 left-10">
                  <div class="text-xl text-textColor text-center w-full">{{ collection.title }}</div>
                  <a href="{{ collection.url }}" class="{{ settings.btn_style }}"
                    ><span>View Collection</span>
                    {%- render 'icon', iconName: 'right-arrow', size: '2em', class: 'inline' -%}
                  </a>
                </div>
                {%- if collection.image -%}
                  <img
                    src="{{collection.image | image_url }}"
                    width=""
                    height=""
                    alt="collection-image"
                    class="w-full shadow"
                  >
                {%- else -%}
                  <img
                    src="{{'collection-placeholder.svg' |  asset_url}}"
                    width=""
                    height=""
                    alt="collection-image-placeholder"
                    class="w-full shadow"
                  >
                {%- endif -%}
              {% endcomment %}
            </div>
            <div class="sm:w-full md:w-4/5">
              <div class="flex flex-nowrap w-full overflow-x-auto sm:gap-2">
                {%- for product in collection.products limit: 5 -%}
                  {%- render 'product-card',
                    product: product,
                    class: 'sm:w-1/2 md:w-1/5 sm:min-w-[48%] md:min-w-[inherit]'
                  -%}
                {%- endfor -%}
              </div>
            </div>
          </div>
        </div>
      {%- endunless -%}
    {%- endfor -%}
  </div>
</section>

{% schema %}
{
  "name": "Collection List",
  "settings": [
    {
      "type": "checkbox",
      "id": "isOverrideDefualt",
      "label": "Override Default Theme",
      "default": false,
      "info": "This option will override the default theme scheme"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme"
    }
  ],
  "presets": [
    {
      "name": "Collection List",
      "settings": {}
    }
  ],
  "enabled_on": {
    "templates": ["list-collections"]
  }
}
{% endschema %}
